FROM node
# 자체 이미지에 대한 설정 명령, local에 없다면 Docker Hub에서 가져옴

WORKDIR /app
# Dockerfile 내 모든 후속 명령이 지정된 경로 내부에서 실행하도록 설정 => 상대경로 사용 가능
# 설정하지 않으면 모든 이미지, 컨테이너에서 명령이 실행됨.

COPY package.json /app
# npm install 명령 실행간 필요한 file를 먼저 컨테이너 내부 /app 경로에 복사
# 내부 코드 변경간 새로 Image를 빌드하는데 걸리는 시간에 대해 최적화 가능 

RUN npm install 
# Node 애플리케이션 실행을 위한 모든 dependencies 설치

COPY . /app
# 이미지에 포함될 파일을 설정
# 두개의 경로를 지정 
# 1. (컨테이너 외부, 이미지 외부의 파일의 경로)
# . => Dockerfile이 저장된 폴더 및 하위 폴더 및 모든 파일을 복사 
# 2. (파일을 저장하는 이미지 내부의 경로) => 이미지, 컨테이너 내부에는 자체 파일 시스템이 있다.
# /app => 절대경로, 이미지, 컨테이너 내부의 app 폴더에 복사

EXPOSE 80
# 로컬 포트와 컨테이너 내부의 애플리케이션의 포트를 연결

CMD ["node", "server.js"]
# 모든 작업이 완료되면 서버 실행
# RUN 명령어 => 이미지 생성간 실행되는 명령어
# CMD 명령어 => 이미지 생성될 때가 아닌 컨테이너를 실행할 때 실행되는 명령어
# CMD 명령어 => 두개의 문자열로 분활 및 LIST 전달

